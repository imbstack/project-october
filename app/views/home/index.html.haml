-content_for :javascripts do
  :javascript
    $(function() {
      var startWidth = $(window).width();
      $articles = $("#articles .row");

      $(window).resize(function() {
        var nowWidth = $articles.width();
        if (nowWidth == startWidth) { return; }

        if (nowWidth < 767) { return; }

        $("#articles .row").masonry({
          itemSelector: '.article',
          columnWidth: nowWidth / 3,
        });
      });

      $articles.imagesLoaded(function() {
        $articles.masonry({
          itemSelector: '.article',
          columnWidth: $articles.width() / 3,
        });
      });
    });
.row
  = render 'feature_article', :article => @posts.first
  -@posts.drop(1).each do |p|
    - if Random.rand > 0.5
      = render 'square_article', :article => p
    - else
      = render 'square_article_with_picture', :article => p
  -#['feature_article', 'square_article_with_picture', 'square_article'].cycle(10).to_a.sample(8).each do |a|
    =# render a
